<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="UTF-8">
<title>メモ保存ページ</title>
<style>
  body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
  #login, #app { display: none; }
  textarea { width: 100%; height: 100px; }
  .note { border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 6px; white-space: pre-wrap; }
</style>
</head>
<body>

<div id="login">
  <h2>パスワードを入力してください</h2>
  <input type="password" id="pw" placeholder="パスワード">
  <button onclick="checkPassword()">ログイン</button>
  <div id="err" style="color:red;margin-top:10px;"></div>
</div>

<div id="app">
  <h1>メモ保存ページ</h1>
  <textarea id="memo" placeholder="文章をここにコピペ"></textarea><br>
  <button onclick="saveMemo()">保存</button>
  <button onclick="clearAll()">全部削除</button>
  <h2>保存一覧</h2>
  <div id="list"></div>
</div>

<script>
const VIEW_PASSWORD = "0528";
const EDIT_PASSWORD = "1639";

document.getElementById("login").style.display = "block";
let notes = JSON.parse(localStorage.getItem("simple_notes") || "[]");

function checkPassword() {
  const entered = document.getElementById("pw").value;
  if(entered === VIEW_PASSWORD){
    document.getElementById("login").style.display = "none";
    document.getElementById("app").style.display = "block";
    document.getElementById("memo").style.display = "none";
    document.querySelector("button[onclick='saveMemo()']").style.display = "none";
    document.querySelector("button[onclick='clearAll()']").style.display = "none";
    render();
  } else if(entered === EDIT_PASSWORD){
    document.getElementById("login").style.display = "none";
    document.getElementById("app").style.display = "block";
    render();
  } else {
    document.getElementById("err").innerText = "パスワードが違います";
  }
}

function saveMemo() {
  const text = document.getElementById("memo").value.trim();
  if(!text){ alert("文章を入力してください"); return; }
  const date = new Date().toLocaleString();
  notes.push({id: Date.now(), text, date});
  localStorage.setItem("simple_notes", JSON.stringify(notes));
  document.getElementById("memo").value = "";
  render();
}

function clearAll() {
  if(confirm("全部削除しますか？")){
    notes = [];
    localStorage.setItem("simple_notes", JSON.stringify(notes));
    render();
  }
}

function render() {
  const list = document.getElementById("list");
  list.innerHTML = "";
  if(notes.length === 0){
    list.innerHTML = "<p>まだ保存なし</p>";
    return;
  }
  notes.slice().reverse().forEach(n => {
    const div = document.createElement("div");
    div.className = "note";
    div.innerHTML = `<div style="font-size:12px;color:#666">${n.date}</div>${n.text}`;
    list.appendChild(div);
  });
}
</script>

</body>
</html>

